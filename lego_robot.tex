\chapter{LEGO} \label{ch:ROBOT}

\begin{osszefoglal}
A fejezetben, bemutatásra kerül a LEGO \cite{lego} megalakulása, fejlődése. E mellet sor kerül a LEGO MINDSTORMS által kifejlesztett technológiák bemutatása, amelyek közül egy pár felhasználásra kerül a továbbiakban.
\end{osszefoglal}

\section{LEGO megalakulása}\label{sec:ROBOT:lego}
A LEGO története 1932-ben kezdődött, Ole Kirk Christiansen\footnote{\href {http://lego.wikia.com/wiki/Ole\_Kirk\_Christiansen}{http://lego.wikia.com/wiki/Ole\_Kirk\_Christiansen}} asztalos vállalkozást alapított Dánia, Billund nevezetű falujában, amely a fa játékok gyártásával foglakozott. 1934-ben vette fel a cég a LEGO nevet, amely a LEG GODT Dán szóból ered. 1947 után kezdtek el műanyagból előállítani játékokat amelyek fő célja az volt, hogy könnyedén egymásba illeszthetőek illetve szétszedhetőek legyenek. Az alapító fia Godtfred Christian lett az igazgató 1958-ban, ekkor alakult meg a ma ismert LEGO vállalat és vezetésével fellendült a cég. Az első számítógép által vezérelt robot 1986-ban jelent meg, amelyet követően 1988-ban a LEGO és az MIT \texttt{(Massachusetts Institute of Technology)} együttműködésével elkezdődött az "inteligens tégla" fejlesztése, mely lehetőséget ad a programozhatóságra.

\section{LEGO MINDSTORMS}\label{sec:ROBOT:mindstorms}
A LEGO  első játéka amit forgalmazott Ole Kirk Christians vezetésével a fából készült "LEGO Duck" évekkel később megjelentek a műanyag játékok. Ma már világszerte ismert a LEGO építőjáték, egymással összeilleszthető, kombinálható elemeket tartalmaz így szinte bármi megépíthető belőle és rendkívül hasznos oktatási eszköz. 

A LEGO MINDSTORMS, egy programozható robotikai építőkészlet. Lehetőséget ad, hogy megépítsd, programozd és irányítsd a robotot.
1998-ban jelent meg az első generáció az RXC \texttt{(Robotic Command eXplorers)}, akkoriban nagy előrelépés volt mivel, teljesen autonóm, képes számítógép nélkül is működni de mára már elavult. Az évek során sokat fejlődött és ma már egyre több oktatási intézmény használja a robotika oktatásban.

\subsection{RXC}

Az RXC amelyet a \ref{fig:RXC} ábra szemlélteti, az első generációs LEGO MINDSTORMS. Ma már nem igen használatos, elavult programozható vezérlőegység, mivel csupán 8 bites mikrokontroller és 32 Kbyte RAM-al rendelkezik. Tartalmaz három szenzor és három motor csatlakozó portot. Ezek mellet egy LCD kijelzőt amin látható az akkumulátor töltöttségi szintje, a bemeneti és kimeneti portok állapota illetve egyéb információk megjelenítésere is alkalmas.

\begin{figure}[!htb]
	\label{fig:RXC}
	\centering
	\pgfimage[width=0.4\linewidth]{images/RXC}
	\caption{RXC brick}
\end{figure}

\subsection{NXT}
A második generáció a \ref{fig:NXT} ábrán látható, az NXT, 2006-ban jelent meg illetve az NXT 2.0 2009-ben, amely több építőelemet és szenzort tartalmaz. Több mindenben különbözik az NXT az RXC-hez képest. Szembetűnő esztétikai változások történtek, javítottak a kapacitáson, növelték a portok számát és megjelentek a szervomotorok.

Az NXT tartalmaz négy szenzort, három motor csatlakozót és egy 2.0 USB portot. Beépített bluetooth kommunikációs adatperrel rendelkezik, megjelent a grafikus kijelző és tartalmazott egy 8Khz hangszórót. Az NXT 32 bites AMTEL ARM7 mikrokontrollerrel, 256 Kbyte flash memóriával és 64 Kbyte RAM-al rendelkezik.

\begin{figure}[!htb]
	\label{fig:NXT}
	\centering
	\pgfimage[width=0.4\linewidth]{images/NXT}
	\caption{NXT brick}
\end{figure}

\subsection{EV3}
A harmadik generáció, az EV3 2013-ban jelent meg, a \ref{fig:EV3} ábra szemlélteti. Az "EV" evolúciót jelenti és a 3, hogy harmadik generáció. A legfejeltebb LEGO MINDSTROMS programozható építőelem amely kezeli a motorokat, szenzorokat és lehetőséget ad Wi-Fi-n vagy Bluetooth-on keresztül való kommunikációra, ezért is választottuk ezt a generációt.

Az EV3 egy ARM9 nevű processzorral van felszerelve, amely 300 Mhz, 16 Mbyte flash memóriával és 64 Mbyte RAM-al rendelkezik. A Linux alapú operációs rendszere nagyban segíti a programozhatóságát. Egy 2.0 mini USB PC port van a számítógéppel való kommunikációhoz, aminek átviteli sebessége 480 Mbit/s, az SD kártya olvasója 32 Gbyte-ot ismer fel. Tartalmaz egy USB portot amely lehetővé teszi, hogy használjunk Wi-Fi dongle-t, ezáltal megkönnyíti a programok kitelepítését, fájlok kezelését és lehetséges a kommunikáció okos készülékekkel is.

Az NXT-hez képest sokat fejlődött, nagyobb a kapacitása, lehetőség van Wi-Fi és SD kártya használatára. Ezek mellet négy szenzor port van három helyett és négy motor csatlakozó port. Nagyobb LCD kijelzőt raktak és a felületén hat gomb van négy helyett, könnyítve az operációs rendszer menüjének kezelését.

\begin{figure}[!htb]
	\label{fig:EV3}
	\centering
	\pgfimage[width=0.4\linewidth]{images/EV3}
	\caption{EV3 brick}
\end{figure}


\section{Ev3 motorok}\label{sec:ROBOT:motorok}
Az NXT generációval megjelentek a szervomotorok, amelyek legfőbb tulajdonsága a pontosság. Két típusa jelent meg a közepes és a nagy szervomotor. Mind a kettőnél megmaradt a pontosság de a méretük, az erejük és a reagálási idejük eltérnek. Tovább fejlesztették a motorokat, amelyek az EV3 generációval jelentek meg. Az EV3 nagy motorjának teljesítménye megegyezik az NXT-vel de a felépítését optimalizálták, illetve a EV3 közepes motorja teljesen uj az NXT-hez képest.

\subsection{Nagy motor}
A nagy motor, amely a \ref{fig:lMotor} ábrázol, erőteljes, ideális a általunk megépített robot irányítására. A motorba beépített forgásérzékelő által  információkat lehet lekérni az pillanatnyi állapotáról, amely fokban vagy teljes fordulatban mér.

A nagy motorok sebessége 160-170 rmp, forgatónyomaték 20 N/cm és ha blokkolt állapotba kerül akkor a nyomatéka 40N/cm. A motor beépített forgásérzékelője lehetővé teszi a pontos vezérlést, +/- 1 fok pontossággal.

A robot mozgatását a nagy motorok segítségével fogjuk elérni, ha bár lassabbak mint a közepes motorok de nagyobb a nyomatékuk és a precizitásuk azonos.

\begin{figure}[!htb]
	\label{fig:lMotor}
	\centering
	\pgfimage[width=0.4\linewidth]{images/large_motor}
	\caption{Nagy motor}
\end{figure}

\subsection{Közepes motor}
A közepes motor, amely a \ref{fig:mMotor} ábrázol, tulajdonsága megegyezik a nagy motorjaival. Ugyancsak tartalmaz forgásérzékelőt és lehetséges a helyzetmeghatározás 1 fok eltéréssel, viszont alacsonyabb terhelésre tervezték, forgatónyomatéka 8 N/cm, ha blokkolt állapotba kerül akkor a nyomatéka 12 N/cm és a sebessége 240-250 rmp.

\begin{figure}[!htb]
	\label{fig:mMotor}
	\centering
	\pgfimage[width=0.4\linewidth]{images/medium_motor}
	\caption{Közepes motor}
\end{figure}

\section{Ev3 szenzorok}\label{sec:ROBOT:szenzorok}

Az NXT csomagban számos szenzor megtalálható, ilyenek mint az érintés, hang, szín és ultrahang szenzorok, amelyeket felhasználva több különböző funkcionalitásokkal bővíthetjük a megépített robotunkat. Az EV3 megjelenése magával hozott még két új szenzort, a giroszkóp és az infravörös szenzorokat. Ezek mellet fejlesztették a már meglévő szenzorokat is.

\subsection{Színszenzor}

A digitális színszenzor, amely a \ref{fig:colorSensor} ábrázol, hét különböző színt ismer fel. A színfelismerő funkcionalitásán kívül mérhető vele a fényvisszaverődés erőssége vagy a környezeti fény intenzitását. E három üzemmód lehető teszi a felhasználóknak, hogy akár kövessen egy fekete vonalat vagy megkülönböztetésen szín szerint tárgyakat és még sok más felhasználási lehetősége van.

\begin{figure}[!htb]
	\label{fig:colorSensor}
	\centering
	\pgfimage[width=0.4\linewidth]{images/color_sensor}
	\caption{Szín szenzor}
\end{figure}

\subsection{Giroszkóp szenzor}

A digitális giroszkóp szenzor, látható a \ref{fig:gyroSensor} ábrán, amelyet mi is felhasználunk, az EV3-al egy időben jelent meg. A giroszkóp igen elterjedt szenzor, megtalálható okostelefonokban, különféle navigációs rendszerek vagy akár irányításért felelős vezérlőegységek használják. A EV3 giroszkóp szenzora egy tengely mentén tud mérni. Látható a \ref{fig:gyroFok} ábrán, hogy a giroszkópon fel van tüntetve két nyíl és ennek segítségével betudjuk állítani a pozícióját, ha jobb oldali nyíl irányába mozdítjuk akkor mínusz értéket kapunk és ha ellentétesen akkor egyértelműen pozitívat. 

A giroszkóp három módban használható. Mérhető az elfordulási szög fokban -90 és 90 intervallumba, a szög gyorsulása illetve lehetséges a két mód használata egyszerre.A pontossága szögmérés esetén +/-3 fok, szög gyorsulása eseté pontosabb. Maximális információ megosztási sebessége 440 fok/másodperc és a mintavételezési sebessége 1 kHz. A sebességét kihasználva simítjuk  a +/-3 fok szórását oly módon, hogy többször mintavételezünk.

\begin{figure}[!htb]
	\centering
	\minipage{0.6\textwidth}
	\label{fig:gyroSensor}
	\pgfimage[width=0.5\linewidth]{images/gyro_sensor}
	\caption{Giroszkóp szenzor}
	\endminipage
	\minipage{0.6\textwidth}
	\label{fig:gyroFok}
	\pgfimage[width=0.4\linewidth]{images/gyro_fok}
	\caption{A giroszkóp szögelfordulási mutatója}
	\endminipage
\end{figure}

\subsection{Nyomásérzékelő}
Az analóg nyomásérzékelője egy piros gombbal van felszerelve ami látható a \ref{fig:touchSensor} ábrán. Funkcionalitása nem túl bonyolult viszont annál hasznosabb. Érzékeli a gomb lenyomását illetve felszabadulását, amelyet egy integrált számlálóval segítségével nyomon lehet követni. 

\begin{figure}[!htb]
	\label{fig:touchSensor}
	\centering
	\pgfimage[width=0.4\linewidth]{images/touche_sensor}
	\caption{Nyomásérzékelő}
\end{figure}

\subsection{Ultrahang szenzor}
A digitális ultrahang szenzor látható a \ref{fig:ultrasonicSensor} ábrán, amely +/- 1 cm hibával meghatározza, hogy milyen távolságra van az előtte lévő tárgy. A hatótávolsága 250 cm és működése a magas frekvencia kibocsátására  alapszik. Számolja az előtte lévő tárgyról visszaverődő frekvenciák érkezésének idejét, ezáltal határozza meg a távolságot. Az akadály pontos irányának meghatározása úgy lehetséges ha több mérést végzünk oldal mozgással. Így lehetőség van, hogy kiszámoljuk az akadály irányát.

\begin{figure}[!htb]
	\label{fig:ultrasonicSensor}
	\centering
	\pgfimage[width=0.4\linewidth]{images/ultrasonic_sensor}
	\caption{Ultrahang szenzor}
\end{figure}

\subsection{Infravörös szenzor}
A digitális infravörös szenzor látható a \ref{fig:infraSensor} ábrán, amelynek a maximális hatótávolsága 70 cm jelentősen kisebb az ultrahang szenzorhoz képest. Funkcionalitása inkább vezérlésre alkalmas, 2 m hatótávolságról is érzékeli a LEGO MINDSTORMS saját infravörös jeladóját, amely latható a \ref{fig:beacon} ábrán.

\begin{figure}[!htb]
	\centering
	\minipage{0.4\textwidth}
	\label{fig:infraSensor}
	\pgfimage[width=0.5\linewidth]{images/infra_sensor}
	\caption{Infravörös szenzor}
	\endminipage
	\minipage{0.4\textwidth}
	\label{fig:beacon}
	\pgfimage[width=0.5\linewidth]{images/beacon}
	\caption{Infravörös jeladó}
	\endminipage
\end{figure}